///https://www.prisma.io/docs/guides/upgrade-guides/upgrade-from-prisma-1/upgrade-from-mongodb-beta
//https://www.prisma.io/docs/concepts/components/prisma-schema/relations
//npx prisma init --datasource-provider=mongodb
//npx prisma generate


generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model Filme {
  id String @id @default(auto()) @map("_id") @db.ObjectId
  linguagem String
  titulo String
  genero String[]
  descricao String
  popularidade Int @default(0)
  type String @default("filme")
  poster String
  imagem_fundo String @default("null")
  data  String
  video String @default("null")
  trailer String @default("null")
  voto_medio Float
  createAt DateTime @default(now())
  updateAt DateTime @default(now())

  @@index([titulo])
  @@map("filme")
}


model Serie {
  id String @id @default(auto()) @map("_id") @db.ObjectId
  linguagem String
  titulo String
  temporada Temporada[] @relation("TituloTemporada")
  genero String
  descricao String
  popularidade Int @default(0)
  type String @default("serie")
  poster String
  imagem_fundo String @default("null")
  data  String
  trailer String  @default("null")
  voto_medio Float

  createAt DateTime @default(now())
  updateAt DateTime @default(now())

  @@index([titulo])
  @@map("serie")
}

model Temporada {
  id String @id @default(auto()) @map("_id") @db.ObjectId
  titulo String 
  num_episodios Int
  episodios  Episodio[] @relation("Episodios")
  serie Serie @relation("TituloTemporada", fields: [serieId], references: [id])
  serieId String @db.ObjectId

  @@index([titulo])
  @@map("temporada")
}

model Episodio {
  id String @id @default(auto()) @map("_id") @db.ObjectId
  titulo String  @default("null")
  descricao String @default("null")
  data  String @default("null")
  poster String @default("null")
  voto_medio Float  @default(0)
  video String @default("null")
  temporada Temporada @relation("Episodios", fields: [temporadaId], references: [id])
  temporadaId String @db.ObjectId

  @@index([titulo])
  @@map("episodio")
}


model Usuario {
  id String @id @default(auto()) @map("_id") @db.ObjectId
  nome String
  email String @unique
  senha String

  @@index( [email, nome])
  @@map("usuario")
}